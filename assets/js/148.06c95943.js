(window.webpackJsonp=window.webpackJsonp||[]).push([[148],{475:function(t,_,v){"use strict";v.r(_);var r=v(12),o=Object(r.a)({},(function(){var t=this,_=t._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("blockquote",[_("p",[t._v("MySQL中存在多种存储引擎，存储引擎是执行器的操作的基础，存储引擎决定了数据库拥有的功能和性能，常见的存储引擎有Memory、InnoDB、MyIsam，MyIsam是早期MySQL的默认存储引擎，后来有其他公司开发并开源了InnoDB，并代替MyIsam成为了MySQL的默认存储引擎，如果没有其他特别的要求，通常是采用InnoDB作为存储引擎。")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th"),t._v(" "),_("th",[t._v("MyISAM")]),t._v(" "),_("th",[t._v("Innodb")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("文件格式")]),t._v(" "),_("td",[t._v("数据和索引是分别存储的，数据"),_("code",[t._v(".MYD")]),t._v("，索引"),_("code",[t._v(".MYI")]),t._v("按记录插入顺序保存")]),t._v(" "),_("td",[t._v("数据和索引是集中存储的，"),_("code",[t._v(".ibd")]),t._v("按主键大小有序插入")])]),t._v(" "),_("tr",[_("td",[t._v("空间碎片（删除记录并"),_("code",[t._v("flush table 表名")]),t._v("之后，表文件大小不变）")]),t._v(" "),_("td",[t._v("产生。定时整理：使用命令"),_("code",[t._v("optimize table 表名")]),t._v("实现")]),t._v(" "),_("td",[t._v("不产生")])]),t._v(" "),_("tr",[_("td",[t._v("事务")]),t._v(" "),_("td",[t._v("不支持")]),t._v(" "),_("td",[t._v("支持")])]),t._v(" "),_("tr",[_("td",[t._v("外键")]),t._v(" "),_("td",[t._v("不支持")]),t._v(" "),_("td",[t._v("支持")])]),t._v(" "),_("tr",[_("td",[t._v("锁支持")]),t._v(" "),_("td",[t._v("表级锁定")]),t._v(" "),_("td",[t._v("行级锁定（不走索引则表锁）")])]),t._v(" "),_("tr",[_("td"),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td"),t._v(" "),_("td"),t._v(" "),_("td")])])])]),t._v(" "),_("h2",{attrs:{id:"一、innodb"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#一、innodb"}},[t._v("#")]),t._v(" 一、InnoDB")]),t._v(" "),_("blockquote",[_("p",[t._v("InnoDB作为MySQL的存储引擎，存在以下几个特点：")]),t._v(" "),_("ul",[_("li",[t._v("支持事物\n"),_("ul",[_("li",[t._v("原子性："),_("code",[t._v("undo log")]),t._v("保证（数据回滚）")]),t._v(" "),_("li",[t._v("隔离性：默认为可重复读，通过MVCC（通过undo log提供多版本控制） + 间隙锁（解决幻读问题）保证")]),t._v(" "),_("li",[t._v("可持久性："),_("code",[t._v("redo log")]),t._v("保证，InnoDB基于Buffer Pool进行数据页操作，Buffer Pool为了性能要求，是随机刷盘的，而事物要求是事物提交后必须满足可持久性的特性，所以采用redo log的方式，直接存储对应的内存快照，以更小的粒度进行事物修改的数据的存储。")])])]),t._v(" "),_("li",[t._v("支持行级锁：InnoDB在走索引的情况下采用的是行级锁，这样可以大大提高数据库的并发能力。")]),t._v(" "),_("li",[t._v("支持聚簇索引（B+树）：InnoDB的主键索引采用聚簇索引，可以避免回表操作，减少查询次数并提高读性能")])])]),t._v(" "),_("h3",{attrs:{id:"_1-1-索引结构"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-索引结构"}},[t._v("#")]),t._v(" 1.1 索引结构")]),t._v(" "),_("h4",{attrs:{id:"b-树"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#b-树"}},[t._v("#")]),t._v(" B+ 树")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://juejin.cn/post/7052581269699297317",target:"_blank",rel:"noopener noreferrer"}},[t._v("为什么要B+树？和B树的区别"),_("OutboundLink")],1)]),t._v(" "),_("h3",{attrs:{id:"_1-2-内存架构"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-内存架构"}},[t._v("#")]),t._v(" 1.2 内存架构")]),t._v(" "),_("h4",{attrs:{id:"buffer-pool"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#buffer-pool"}},[t._v("#")]),t._v(" Buffer Pool")]),t._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"https://mp.weixin.qq.com/s/wr2gJGQSA8QH_lmPh1XOkw",target:"_blank",rel:"noopener noreferrer"}},[t._v("InnoDB架构"),_("OutboundLink")],1)])]),t._v(" "),_("h3",{attrs:{id:"_1-3-日志文件"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-日志文件"}},[t._v("#")]),t._v(" 1.3 日志文件")]),t._v(" "),_("h4",{attrs:{id:"bin-log"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#bin-log"}},[t._v("#")]),t._v(" bin log")]),t._v(" "),_("h4",{attrs:{id:"undo-log"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#undo-log"}},[t._v("#")]),t._v(" undo log")]),t._v(" "),_("h4",{attrs:{id:"redo-log"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#redo-log"}},[t._v("#")]),t._v(" redo log")])])}),[],!1,null,null,null);_.default=o.exports}}]);