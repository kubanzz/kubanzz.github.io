(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{368:function(e,r,a){"use strict";a.r(r);var s=a(12),t=Object(s.a)({},(function(){var e=this,r=e._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h2",{attrs:{id:"一、maven环境隔离简介"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#一、maven环境隔离简介"}},[e._v("#")]),e._v(" 一、Maven环境隔离简介")]),e._v(" "),r("h4",{attrs:{id:"基本类别"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#基本类别"}},[e._v("#")]),e._v(" 基本类别")]),e._v(" "),r("ul",[r("li",[e._v("本地开发环境（local）")]),e._v(" "),r("li",[e._v("开发环境（dev）")]),e._v(" "),r("li",[e._v("测试环境（beta）")]),e._v(" "),r("li",[e._v("线上环境（prod）")])]),e._v(" "),r("h4",{attrs:{id:"解决的问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#解决的问题"}},[e._v("#")]),e._v(" 解决的问题")]),e._v(" "),r("ul",[r("li",[e._v("避免人工修改配置信息导致的问题")]),e._v(" "),r("li",[e._v("轻松分环境编译，打包，部署")]),e._v(" "),r("li",[e._v("......")])]),e._v(" "),r("h4",{attrs:{id:"环境隔离的依赖"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#环境隔离的依赖"}},[e._v("#")]),e._v(" 环境隔离的依赖")]),e._v(" "),r("ul",[r("li",[r("p",[r("strong",[e._v("Spring Profile")]),e._v("：")]),e._v(" "),r("ul",[r("li",[r("p",[e._v("a. Spring可使用Profile决定程序在不同环境下执行情况，包含配置、加载Bean、依赖等。\nSpring的Profile一般项目包含："),r("strong",[e._v("dev(开发), test(单元测试), qa(集成测试), prod(生产环境)")]),e._v("。由"),r("strong",[e._v("spring.profiles.active")]),e._v("属性决定启用的profile。")])]),e._v(" "),r("li",[r("p",[e._v("b. SpringBoot的配置文件默认为 "),r("strong",[e._v("application.properties")]),e._v("(或yaml，此外仅以properties配置为说明)。不同Profile下的配置文件由"),r("strong",[e._v("application-{profile}.properties")]),e._v("管理，同时独立的 Profile配置文件会覆盖默认文件下的属性。")])])])]),e._v(" "),r("li",[r("p",[r("strong",[e._v("Maven Profile：")]),e._v("\nMaven同样也有Profile设置，可在构建过程中针对不同的Profile环境执行不同的操作，包含配置、依赖、行为等。\nMaven的Profile由 "),r("strong",[e._v("pom.xml")]),e._v(" 的标签管理。每个Profile中可设置：id(唯一标识), properties(配置属性), activation(自动触发的逻辑条件), dependencies(依赖)等。")])])]),e._v(" "),r("p"),e._v(" "),r("h2",{attrs:{id:"二、相关配置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#二、相关配置"}},[e._v("#")]),e._v(" 二、相关配置")]),e._v(" "),r("p",[e._v("Maven")]),e._v(" "),r("ul",[r("li",[r("strong",[e._v("pom.xml")]),e._v("中，在build（dependencies）同级的地方加入：")])]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("//分别代表开发（dev），测试（beta）和线上（prod）环境\n<profiles>\n    <profile>\n        <id>dev</id>\n        <activation>\n            <activeByDefault>true</activeByDefault>\n        </activation>\n        <properties>\n            <profile>dev</profile>\n        </properties>\n    </profile>\n    <profile>\n        <id>beta</id>\n        <properties>\n            <profile>beta</profile>\n        </properties>\n    </profile>\n    <profile>\n        <id>prod</id>\n        <properties>\n            <profile>prod</profile>\n        </properties>\n    </profile>\n</profiles>\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br"),r("span",{staticClass:"line-number"},[e._v("5")]),r("br"),r("span",{staticClass:"line-number"},[e._v("6")]),r("br"),r("span",{staticClass:"line-number"},[e._v("7")]),r("br"),r("span",{staticClass:"line-number"},[e._v("8")]),r("br"),r("span",{staticClass:"line-number"},[e._v("9")]),r("br"),r("span",{staticClass:"line-number"},[e._v("10")]),r("br"),r("span",{staticClass:"line-number"},[e._v("11")]),r("br"),r("span",{staticClass:"line-number"},[e._v("12")]),r("br"),r("span",{staticClass:"line-number"},[e._v("13")]),r("br"),r("span",{staticClass:"line-number"},[e._v("14")]),r("br"),r("span",{staticClass:"line-number"},[e._v("15")]),r("br"),r("span",{staticClass:"line-number"},[e._v("16")]),r("br"),r("span",{staticClass:"line-number"},[e._v("17")]),r("br"),r("span",{staticClass:"line-number"},[e._v("18")]),r("br"),r("span",{staticClass:"line-number"},[e._v("19")]),r("br"),r("span",{staticClass:"line-number"},[e._v("20")]),r("br"),r("span",{staticClass:"line-number"},[e._v("21")]),r("br"),r("span",{staticClass:"line-number"},[e._v("22")]),r("br"),r("span",{staticClass:"line-number"},[e._v("23")]),r("br"),r("span",{staticClass:"line-number"},[e._v("24")]),r("br")])]),r("ul",[r("li",[e._v("在classpath下分别创建三个环境需要的"),r("strong",[e._v("application-${profile}.propertices：")])])]),e._v(" "),r("p",[r("img",{attrs:{src:"https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images50625172-3790ed80-0f61-11e9-9502-ce07352c2e69.jpeg",alt:"default"}})]),e._v(" "),r("ul",[r("li",[e._v("在"),r("strong",[e._v("application.propertices")]),e._v("中配置指定的环境：")])]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("//配置动态的profile注入（profile的值由maven修改）\nspring.profiles.active=@profile@\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br")])]),r("p"),r("h3",[e._v("3. 通过Eclipse对maven的profile进行设置：")]),e._v("\n（右键项目 - peoperties - maven - 输入pom中配置的profile的Id - Apply后即配置环境成功）"),r("p"),e._v(" "),r("p",[r("img",{attrs:{src:"https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images50625473-67d98b80-0f63-11e9-9e2b-10005520d02e.jpeg",alt:"2"}})]),e._v(" "),r("p"),e._v(" "),r("h4",{attrs:{id:"参考文章"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[e._v("#")]),e._v(" 参考文章：")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.jianshu.com/p/948c303b2253",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考一"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://yq.aliyun.com/articles/670083",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考二"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"http://tengj.top/2017/02/28/springboot2/",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考三"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.jianshu.com/p/ad1b8157feaf",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考四"),r("OutboundLink")],1)])]),e._v(" "),r("hr")])}),[],!1,null,null,null);r.default=t.exports}}]);