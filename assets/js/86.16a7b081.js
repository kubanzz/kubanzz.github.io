(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{411:function(t,s,n){"use strict";n.r(s);var a=n(12),e=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"一、写在前面"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、写在前面"}},[t._v("#")]),t._v(" 一、写在前面")]),t._v(" "),s("p",[s("strong",[t._v("学习博客：")])]),t._v(" "),s("ul",[s("li",[t._v("https://blog.csdn.net/qiyuexuelang/article/details/8861300")])]),t._v(" "),s("p",[s("strong",[t._v("需要导入的包：")])]),t._v(" "),s("ul",[s("li",[t._v("commons-fileupload-1.3.1.jar；")]),t._v(" "),s("li",[t._v("commons-io-2.4.jar；")]),t._v(" "),s("li",[t._v("mysql-connector-java-5.1.39-bin.jar；")])]),t._v(" "),s("p"),t._v(" "),s("h2",{attrs:{id:"二、实现流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、实现流程"}},[t._v("#")]),t._v(" 二、实现流程")]),t._v(" "),s("h3",{attrs:{id:"_1-图片添加界面-add-jsp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-图片添加界面-add-jsp"}},[t._v("#")]),t._v(" 1. 图片添加界面：add.jsp")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('<%@ page language="java" contentType="text/html; charset=utf-8"\n\tpageEncoding="utf-8"%>\n<!DOCTYPE html>\n<jsp:useBean id="DBBean" scope="page" class="com.zeng.lab06.DBBean"/>\n\n<%\n\tDBBean.getConnect();\n\n\tString createSQL = "CREATE TABLE IF NOT EXISTS lab06(id int PRIMARY KEY AUTO_INCREMENT,title varchar(255),author varchar(255),file varchar(255))";\n\tDBBean.createTable(createSQL);\n%>\n\n<html>\n<head>\n<meta charset="utf-8">\n<title>Insert title here</title>\n<link rel="stylesheet"\n\thref="https://cdn.bootcss.com/bootstrap/4.0.0/css/bootstrap.min.css">\n<style type="text/css">\n#upload {\n\twidth: 30%;\n\theight: 400px;\n\tborder-width: 1px;\n\tborder-style: inset;\n\tmargin-top: 8%;\n\tmargin-left: 35%;\n\tbackground-color: white;\n\tmargin-top: 8%;\n}\n\n#form{\n\tmargin-top: 28%;\n\tmargin-left: 10%;\n\twidth: 80%;\n}\n</style>\n</head>\n\n<body>\n\t<div id="upload">\n\t\t<form id="form" action="../UploadServlet" method="post" enctype="multipart/form-data">\n\t\t\t<div class="input-group mb-3">\n\t\t\t\t<input type="text" class="form-control"\n\t\t\t\t\tplaceholder="title" aria-label="title"\n\t\t\t\t\taria-describedby="basic-addon2" name="title">\n\t\t\t\t<div class="input-group-append">\n\t\t\t\t\t<span class="input-group-text" id="basic-addon2">标题</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="input-group mb-3">\n\t\t\t\t<input type="text" class="form-control"\n\t\t\t\t\tplaceholder="name" aria-label="name"\n\t\t\t\t\taria-describedby="basic-addon2" name="author">\n\t\t\t\t<div class="input-group-append">\n\t\t\t\t\t<span class="input-group-text" id="basic-addon2">发布人</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="input-group">\n\t\t\t\t<div class="custom-file">\n\t\t\t\t\t<input type="file" class="custom-file-input" id="inputGroupFile04" name="file">\n\t\t\t\t\t<label class="custom-file-label" for="inputGroupFile04">choose image</label>\n\t\t\t\t</div>\n\t\t\t\t<div class="input-group-append">\n\t\t\t\t\t<button class="btn btn-outline-secondary" type="submit">Upload</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</form>\n\t\n\t</div>\n\t<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.slim.min.js"><\/script>\n\t<script\n\t\tsrc="https://cdn.bootcss.com/popper.js/1.12.9/umd/popper.min.js"><\/script>\n\t<script\n\t\tsrc="https://cdn.bootcss.com/bootstrap/4.0.0/js/bootstrap.min.js"><\/script>\n</body>\n</html>\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br"),s("span",{staticClass:"line-number"},[t._v("61")]),s("br"),s("span",{staticClass:"line-number"},[t._v("62")]),s("br"),s("span",{staticClass:"line-number"},[t._v("63")]),s("br"),s("span",{staticClass:"line-number"},[t._v("64")]),s("br"),s("span",{staticClass:"line-number"},[t._v("65")]),s("br"),s("span",{staticClass:"line-number"},[t._v("66")]),s("br"),s("span",{staticClass:"line-number"},[t._v("67")]),s("br"),s("span",{staticClass:"line-number"},[t._v("68")]),s("br"),s("span",{staticClass:"line-number"},[t._v("69")]),s("br"),s("span",{staticClass:"line-number"},[t._v("70")]),s("br"),s("span",{staticClass:"line-number"},[t._v("71")]),s("br"),s("span",{staticClass:"line-number"},[t._v("72")]),s("br"),s("span",{staticClass:"line-number"},[t._v("73")]),s("br"),s("span",{staticClass:"line-number"},[t._v("74")]),s("br"),s("span",{staticClass:"line-number"},[t._v("75")]),s("br"),s("span",{staticClass:"line-number"},[t._v("76")]),s("br"),s("span",{staticClass:"line-number"},[t._v("77")]),s("br"),s("span",{staticClass:"line-number"},[t._v("78")]),s("br")])]),s("p"),t._v(" "),s("h3",{attrs:{id:"_2-图片上传的servlet-uploadservlet-java"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-图片上传的servlet-uploadservlet-java"}},[t._v("#")]),t._v(" 2. 图片上传的servlet：UploadServlet.java")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('package com.zeng.lab06;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.sql.ResultSet;\nimport java.util.List;\n\nimport javax.servlet.ServletContext;\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.Cookie;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport org.apache.commons.fileupload.FileItem;\nimport org.apache.commons.fileupload.FileUploadException;\nimport org.apache.commons.fileupload.disk.DiskFileItemFactory;\nimport org.apache.commons.fileupload.servlet.ServletFileUpload;\n\n@WebServlet("/UploadServlet")\npublic class UploadServlet extends HttpServlet {\n\tprivate static final long serialVersionUID = 1L;\n\n\tpublic UploadServlet() {\n\t\tsuper();\n\t}\n\n\tprotected void doGet(HttpServletRequest request, HttpServletResponse response)\n\t\t\tthrows ServletException, IOException {\n\n\t\trequest.setCharacterEncoding("utf-8");\n\t\tresponse.setContentType("text/html;charset=utf-8");\n\n\t\t// 为解析类提供配置信息\n\t\tDiskFileItemFactory factory = new DiskFileItemFactory();\n\n\t\t// 创建解析类的实例\n\t\tServletFileUpload suf = new ServletFileUpload(factory);\n\n\t\t// 设置文件大小\n\t\tsuf.setFileSizeMax(1024 * 400);\n\n\t\tString title = "";\n\t\tString author = "";\n\t\tString imgUploadPath = "";\n\t\tString fileName = "";\n\t\ttry {\n\t\t\tList<FileItem> items = suf.parseRequest(request);\n\n\t\t\tfor (FileItem item : items) {\n\n\t\t\t\t// isFormField为true，表示这不是文件上传表单域\n\t\t\t\tif (!item.isFormField()) {\n\n\t\t\t\t\tServletContext sctx = getServletContext();\n\n\t\t\t\t\t//返回包含给定虚拟路径的实际路径。\n\t\t\t\t\tString path = sctx.getRealPath("/upload");\n\n\t\t\t\t\tfileName = item.getName();\n\t\t\t\t\tfileName = fileName.substring(fileName.lastIndexOf("\\\\") + 1);\n\t\t\t\t\timgUploadPath = path + "\\\\" + fileName;\n\n\t\t\t\t\tSystem.out.println(imgUploadPath + "=========");\n\t\t\t\t\t// "\\"会被转义，需要输入"\\\\\\\\"用于表示"\\"\n\t\t\t\t\timgUploadPath = imgUploadPath.replaceAll("\\\\\\\\", "/");\n\n\t\t\t\t\tSystem.out.println(imgUploadPath + "=========");\n\n\t\t\t\t\tFile file = new File(imgUploadPath);\n\t\t\t\t\tif (!file.exists()) {\n\t\t\t\t\t\t// 创建文件所需的目录(用于保存上传的图片)\n\t\t\t\t\t\tfile.getParentFile().mkdirs();\n\t\t\t\t\t\titem.write(file);\n\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tif (item.getFieldName().equals("title")) {\n\t\t\t\t\t\ttitle = item.getString();\n\t\t\t\t\t} else if (item.getFieldName().equals("author")) {\n\t\t\t\t\t\tauthor = item.getString();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//保存图片的相对路径\n\t\t\tString rootPath = "/upload/" + fileName;\n\t\t\tString sql = "insert into lab06(title,author,file) " + "values(\'" + title + "\',\'" + author + "\',\'"\n\t\t\t\t\t+ rootPath + "\')";\n\t\t\tDBBean.executeUpdate(sql);\n\n\t\t\tresponse.sendRedirect("lab06_jsp/list.jsp");\n\n\t\t} catch (FileUploadException e) {\n\t\t\te.printStackTrace();\n\t\t} catch (Exception e) {\n\t\t\te.printStackTrace();\n\t\t}\n\n\t}\n\n\tprotected void doPost(HttpServletRequest request, HttpServletResponse response)\n\t\t\tthrows ServletException, IOException {\n\t\tdoGet(request, response);\n\t}\n}\n\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br"),s("span",{staticClass:"line-number"},[t._v("61")]),s("br"),s("span",{staticClass:"line-number"},[t._v("62")]),s("br"),s("span",{staticClass:"line-number"},[t._v("63")]),s("br"),s("span",{staticClass:"line-number"},[t._v("64")]),s("br"),s("span",{staticClass:"line-number"},[t._v("65")]),s("br"),s("span",{staticClass:"line-number"},[t._v("66")]),s("br"),s("span",{staticClass:"line-number"},[t._v("67")]),s("br"),s("span",{staticClass:"line-number"},[t._v("68")]),s("br"),s("span",{staticClass:"line-number"},[t._v("69")]),s("br"),s("span",{staticClass:"line-number"},[t._v("70")]),s("br"),s("span",{staticClass:"line-number"},[t._v("71")]),s("br"),s("span",{staticClass:"line-number"},[t._v("72")]),s("br"),s("span",{staticClass:"line-number"},[t._v("73")]),s("br"),s("span",{staticClass:"line-number"},[t._v("74")]),s("br"),s("span",{staticClass:"line-number"},[t._v("75")]),s("br"),s("span",{staticClass:"line-number"},[t._v("76")]),s("br"),s("span",{staticClass:"line-number"},[t._v("77")]),s("br"),s("span",{staticClass:"line-number"},[t._v("78")]),s("br"),s("span",{staticClass:"line-number"},[t._v("79")]),s("br"),s("span",{staticClass:"line-number"},[t._v("80")]),s("br"),s("span",{staticClass:"line-number"},[t._v("81")]),s("br"),s("span",{staticClass:"line-number"},[t._v("82")]),s("br"),s("span",{staticClass:"line-number"},[t._v("83")]),s("br"),s("span",{staticClass:"line-number"},[t._v("84")]),s("br"),s("span",{staticClass:"line-number"},[t._v("85")]),s("br"),s("span",{staticClass:"line-number"},[t._v("86")]),s("br"),s("span",{staticClass:"line-number"},[t._v("87")]),s("br"),s("span",{staticClass:"line-number"},[t._v("88")]),s("br"),s("span",{staticClass:"line-number"},[t._v("89")]),s("br"),s("span",{staticClass:"line-number"},[t._v("90")]),s("br"),s("span",{staticClass:"line-number"},[t._v("91")]),s("br"),s("span",{staticClass:"line-number"},[t._v("92")]),s("br"),s("span",{staticClass:"line-number"},[t._v("93")]),s("br"),s("span",{staticClass:"line-number"},[t._v("94")]),s("br"),s("span",{staticClass:"line-number"},[t._v("95")]),s("br"),s("span",{staticClass:"line-number"},[t._v("96")]),s("br"),s("span",{staticClass:"line-number"},[t._v("97")]),s("br"),s("span",{staticClass:"line-number"},[t._v("98")]),s("br"),s("span",{staticClass:"line-number"},[t._v("99")]),s("br"),s("span",{staticClass:"line-number"},[t._v("100")]),s("br"),s("span",{staticClass:"line-number"},[t._v("101")]),s("br"),s("span",{staticClass:"line-number"},[t._v("102")]),s("br"),s("span",{staticClass:"line-number"},[t._v("103")]),s("br"),s("span",{staticClass:"line-number"},[t._v("104")]),s("br"),s("span",{staticClass:"line-number"},[t._v("105")]),s("br"),s("span",{staticClass:"line-number"},[t._v("106")]),s("br"),s("span",{staticClass:"line-number"},[t._v("107")]),s("br"),s("span",{staticClass:"line-number"},[t._v("108")]),s("br"),s("span",{staticClass:"line-number"},[t._v("109")]),s("br"),s("span",{staticClass:"line-number"},[t._v("110")]),s("br")])]),s("p"),t._v(" "),s("h3",{attrs:{id:"_3-图片分页显示界面-list-jsp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-图片分页显示界面-list-jsp"}},[t._v("#")]),t._v(" 3. 图片分页显示界面：list.jsp")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('<%@page import="java.sql.ResultSet"%>\n<%@page import="com.zeng.lab06.DBBean"%>\n<%@ page language="java" contentType="text/html; charset=utf-8"\n\tpageEncoding="utf-8"%>\n\n<%\n\tString path = request.getContextPath();\n\tString basePath = request.getScheme() + "://" + request.getServerName() + ":" + request.getServerPort()\n\t\t\t+ path + "/";\n%>\n\n<!DOCTYPE html>\n\n<jsp:useBean id="DBBean" scope="page" class="com.zeng.lab06.DBBean" />\n<%\n\tDBBean.getConnect();\n\n\tString sqlTotal = "select count(*) from lab06";\n\tResultSet rs1 = DBBean.executeQuery(sqlTotal);\n\t\n\tint total = 0;\n\twhile(rs1.next()){\n\t\t//总的上传数\n\t\ttotal = Integer.parseInt(rs1.getString(1));\n\t}\n\t\n\t\n\t//起始下标\n\tint index;\n\t\n\tString indexTemp = request.getParameter("index");\n\tif(indexTemp == null || indexTemp.equals("")){\n\t\tindex = 0;\n\t}else{\n\t\tindex = Integer.parseInt(indexTemp);\n\t}\n\t\n\t//每五个分一页\n\tint number = 3;\n\t\n%>\n\n<html>\n<head>\n<meta charset="utf-8">\n<link rel="stylesheet"\n\thref="https://cdn.bootcss.com/bootstrap/4.0.0/css/bootstrap.min.css">\n<title>Insert title here</title>\n\n<style>\n#main {\n\twidth: 60%;\n\tmargin-top: 5%;\n\tmargin-left: 20%;\n\tborder: 1px inset;\n}\n\n#bottom {\n\tmargin-left: 38%;\n}\n\n.table {\n\ttext-align: center;\n\tvertical-align: center;\n}\n</style>\n\n</head>\n<body>\n\t<div id="main">\n\t\t<div id="content">\n\t\t\t<table class="table">\n\t\t\t\t<thead class="thead-light">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th scope="col">#</th>\n\t\t\t\t\t\t<th scope="col">图片</th>\n\t\t\t\t\t\t<th scope="col">标题</th>\n\t\t\t\t\t\t<th scope="col">发布人</th>\n\t\t\t\t\t\t<th>查看详情</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t<%\n\t\t\t\t\t\tif(index < 0){\n\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\tString sql = "select * from lab06 limit " + index + "," + number;\n\t\t\t\t\t\tResultSet rs = DBBean.executeQuery(sql);\n\t\t\t\t\t\t\n\t\t\t\t\t\tString author = null;\n\t\t\t\t\t\tString title = null;\n\t\t\t\t\t\tString img = null;\n\t\t\t\t\t\twhile (rs.next()) {\n\t\t\t\t\t\t\timg = basePath + rs.getString(4);\n\t\t\t\t\t\t\ttitle = rs.getString(2);\n\t\t\t\t\t\t\tauthor = rs.getString(3);\n\t\t\t\t\t\t\t\n\t\t\t\t\t%>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th scope="row"><%=rs.getString(1)%></th>\n\t\t\t\t\t\t<td><img src="<%=img%>"></td>\n\t\t\t\t\t\t<td><%=title%></td>\n\t\t\t\t\t\t<td><%=author%></td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<a type="button" class="btn btn-success" href="detail.jsp?\n\t\t\t\t\t\t\timg=<%=img%>&title=<%=title%>&author=<%=author%>">detail</a>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<%\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(index + number > total){\n\t\t\t\t\t\t\tindex = index - number;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t//要分的页数\n\t\t\t\t\t\tint pageT = (total % number==0)? (total/number) : (total/number + 1);\n\t\t\t\t\t%>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t\t<div id="bottom">\n\t\t\t<nav aria-label="Page navigation example">\n\t\t\t\t<ul class="pagination">\n\t\t\t\t\t<li class="page-item">\n\t\t\t\t\t\t<a class="page-link" href="list.jsp?pageT=<%=pageT%>&total=<%=total%>&index=<%=index-number%>" aria-label="Previous"> \n\t\t\t\t\t\t\t<span aria-hidden="true">&laquo;</span>\n\t\t\t\t\t\t\t<span class="sr-only">Previous</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<% \n\t\t\t\t\t\tfor(int i = 1;i <= pageT;i ++){\n\t\t\t\t\t\t\t\n\t\t\t\t\t%>\n\t\t\t\t\t\t<li class="page-item"><a class="page-link" href="list.jsp?pageT=<%=i%>&total=<%=total%>&index=<%=number*(i-1)%>"><%=i %></a></li>\n\t\t\t\t\t<%\n\t\t\t\t\t\t}\n\t\t\t\t\t%>\n\t\t\t\t\t<li class="page-item">\n\t\t\t\t\t\t<a class="page-link" href="list.jsp?pageT=<%=pageT%>&total=<%=total%>&index=<%=index+number%>" aria-label="Next"> \n\t\t\t\t\t\t\t<span aria-hidden="true">&raquo;</span> \n\t\t\t\t\t\t\t<span class="sr-only">Next</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</nav>\n\t\t</div>\n\t</div>\n\t<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.slim.min.js"><\/script>\n\t<script\n\t\tsrc="https://cdn.bootcss.com/popper.js/1.12.9/umd/popper.min.js"><\/script>\n\t<script\n\t\tsrc="https://cdn.bootcss.com/bootstrap/4.0.0/js/bootstrap.min.js"><\/script>\n</body>\n</html>\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br"),s("span",{staticClass:"line-number"},[t._v("61")]),s("br"),s("span",{staticClass:"line-number"},[t._v("62")]),s("br"),s("span",{staticClass:"line-number"},[t._v("63")]),s("br"),s("span",{staticClass:"line-number"},[t._v("64")]),s("br"),s("span",{staticClass:"line-number"},[t._v("65")]),s("br"),s("span",{staticClass:"line-number"},[t._v("66")]),s("br"),s("span",{staticClass:"line-number"},[t._v("67")]),s("br"),s("span",{staticClass:"line-number"},[t._v("68")]),s("br"),s("span",{staticClass:"line-number"},[t._v("69")]),s("br"),s("span",{staticClass:"line-number"},[t._v("70")]),s("br"),s("span",{staticClass:"line-number"},[t._v("71")]),s("br"),s("span",{staticClass:"line-number"},[t._v("72")]),s("br"),s("span",{staticClass:"line-number"},[t._v("73")]),s("br"),s("span",{staticClass:"line-number"},[t._v("74")]),s("br"),s("span",{staticClass:"line-number"},[t._v("75")]),s("br"),s("span",{staticClass:"line-number"},[t._v("76")]),s("br"),s("span",{staticClass:"line-number"},[t._v("77")]),s("br"),s("span",{staticClass:"line-number"},[t._v("78")]),s("br"),s("span",{staticClass:"line-number"},[t._v("79")]),s("br"),s("span",{staticClass:"line-number"},[t._v("80")]),s("br"),s("span",{staticClass:"line-number"},[t._v("81")]),s("br"),s("span",{staticClass:"line-number"},[t._v("82")]),s("br"),s("span",{staticClass:"line-number"},[t._v("83")]),s("br"),s("span",{staticClass:"line-number"},[t._v("84")]),s("br"),s("span",{staticClass:"line-number"},[t._v("85")]),s("br"),s("span",{staticClass:"line-number"},[t._v("86")]),s("br"),s("span",{staticClass:"line-number"},[t._v("87")]),s("br"),s("span",{staticClass:"line-number"},[t._v("88")]),s("br"),s("span",{staticClass:"line-number"},[t._v("89")]),s("br"),s("span",{staticClass:"line-number"},[t._v("90")]),s("br"),s("span",{staticClass:"line-number"},[t._v("91")]),s("br"),s("span",{staticClass:"line-number"},[t._v("92")]),s("br"),s("span",{staticClass:"line-number"},[t._v("93")]),s("br"),s("span",{staticClass:"line-number"},[t._v("94")]),s("br"),s("span",{staticClass:"line-number"},[t._v("95")]),s("br"),s("span",{staticClass:"line-number"},[t._v("96")]),s("br"),s("span",{staticClass:"line-number"},[t._v("97")]),s("br"),s("span",{staticClass:"line-number"},[t._v("98")]),s("br"),s("span",{staticClass:"line-number"},[t._v("99")]),s("br"),s("span",{staticClass:"line-number"},[t._v("100")]),s("br"),s("span",{staticClass:"line-number"},[t._v("101")]),s("br"),s("span",{staticClass:"line-number"},[t._v("102")]),s("br"),s("span",{staticClass:"line-number"},[t._v("103")]),s("br"),s("span",{staticClass:"line-number"},[t._v("104")]),s("br"),s("span",{staticClass:"line-number"},[t._v("105")]),s("br"),s("span",{staticClass:"line-number"},[t._v("106")]),s("br"),s("span",{staticClass:"line-number"},[t._v("107")]),s("br"),s("span",{staticClass:"line-number"},[t._v("108")]),s("br"),s("span",{staticClass:"line-number"},[t._v("109")]),s("br"),s("span",{staticClass:"line-number"},[t._v("110")]),s("br"),s("span",{staticClass:"line-number"},[t._v("111")]),s("br"),s("span",{staticClass:"line-number"},[t._v("112")]),s("br"),s("span",{staticClass:"line-number"},[t._v("113")]),s("br"),s("span",{staticClass:"line-number"},[t._v("114")]),s("br"),s("span",{staticClass:"line-number"},[t._v("115")]),s("br"),s("span",{staticClass:"line-number"},[t._v("116")]),s("br"),s("span",{staticClass:"line-number"},[t._v("117")]),s("br"),s("span",{staticClass:"line-number"},[t._v("118")]),s("br"),s("span",{staticClass:"line-number"},[t._v("119")]),s("br"),s("span",{staticClass:"line-number"},[t._v("120")]),s("br"),s("span",{staticClass:"line-number"},[t._v("121")]),s("br"),s("span",{staticClass:"line-number"},[t._v("122")]),s("br"),s("span",{staticClass:"line-number"},[t._v("123")]),s("br"),s("span",{staticClass:"line-number"},[t._v("124")]),s("br"),s("span",{staticClass:"line-number"},[t._v("125")]),s("br"),s("span",{staticClass:"line-number"},[t._v("126")]),s("br"),s("span",{staticClass:"line-number"},[t._v("127")]),s("br"),s("span",{staticClass:"line-number"},[t._v("128")]),s("br"),s("span",{staticClass:"line-number"},[t._v("129")]),s("br"),s("span",{staticClass:"line-number"},[t._v("130")]),s("br"),s("span",{staticClass:"line-number"},[t._v("131")]),s("br"),s("span",{staticClass:"line-number"},[t._v("132")]),s("br"),s("span",{staticClass:"line-number"},[t._v("133")]),s("br"),s("span",{staticClass:"line-number"},[t._v("134")]),s("br"),s("span",{staticClass:"line-number"},[t._v("135")]),s("br"),s("span",{staticClass:"line-number"},[t._v("136")]),s("br"),s("span",{staticClass:"line-number"},[t._v("137")]),s("br"),s("span",{staticClass:"line-number"},[t._v("138")]),s("br"),s("span",{staticClass:"line-number"},[t._v("139")]),s("br"),s("span",{staticClass:"line-number"},[t._v("140")]),s("br"),s("span",{staticClass:"line-number"},[t._v("141")]),s("br"),s("span",{staticClass:"line-number"},[t._v("142")]),s("br"),s("span",{staticClass:"line-number"},[t._v("143")]),s("br"),s("span",{staticClass:"line-number"},[t._v("144")]),s("br"),s("span",{staticClass:"line-number"},[t._v("145")]),s("br"),s("span",{staticClass:"line-number"},[t._v("146")]),s("br"),s("span",{staticClass:"line-number"},[t._v("147")]),s("br"),s("span",{staticClass:"line-number"},[t._v("148")]),s("br"),s("span",{staticClass:"line-number"},[t._v("149")]),s("br"),s("span",{staticClass:"line-number"},[t._v("150")]),s("br"),s("span",{staticClass:"line-number"},[t._v("151")]),s("br"),s("span",{staticClass:"line-number"},[t._v("152")]),s("br"),s("span",{staticClass:"line-number"},[t._v("153")]),s("br"),s("span",{staticClass:"line-number"},[t._v("154")]),s("br"),s("span",{staticClass:"line-number"},[t._v("155")]),s("br"),s("span",{staticClass:"line-number"},[t._v("156")]),s("br")])]),s("p"),t._v(" "),s("h3",{attrs:{id:"_4-详情图片信息显示页面-detail-jsp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-详情图片信息显示页面-detail-jsp"}},[t._v("#")]),t._v(" 4. 详情图片信息显示页面：detail.jsp")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('<%@ page language="java" contentType="text/html; charset=utf-8"\n\tpageEncoding="utf-8"%>\n\t\n\t\n<%\n\tString path = request.getContextPath();\n\tString basePath = request.getScheme() + "://" + request.getServerName() + ":" + request.getServerPort()\n\t\t\t+ path + "/";\n%>\n\t\n\t\n<!DOCTYPE html>\n<html>\n<head>\n<meta charset="utf-8">\n<title>Insert title here</title>\n<link rel="stylesheet"\n\thref="https://cdn.bootcss.com/bootstrap/4.0.0/css/bootstrap.min.css">\n\n<style type="text/css">\n\t.card{\n\t\tmargin-top: 5%;\n\t\tmargin-left: 30%;\n\t}\n\t\n\t.black{\n\t\tmargin-left: 85%;\n\t}\n}\n</style>\n</head>\n<body>\n\t<div>\n\t\t<div class="card" style="width: 35rem;">\n\t\t\t<img class="card-img-top" src="<%=request.getParameter("img") %>" alt="Card image cap">\n\t\t\t<div class="card-body">\n\t\t\t\t<h5 class="card-title">标题：<%=request.getParameter("title") %></h5>\n\t\t\t\t<p class="card-text">作者：<%=request.getParameter("author") %></p>\n\t\t\t\t<div class="black"><a href="list.jsp" class="btn btn-primary">返回</a></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.slim.min.js"><\/script>\n\t<script\n\t\tsrc="https://cdn.bootcss.com/popper.js/1.12.9/umd/popper.min.js"><\/script>\n\t<script\n\t\tsrc="https://cdn.bootcss.com/bootstrap/4.0.0/js/bootstrap.min.js"><\/script>\n</body>\n</html>\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);