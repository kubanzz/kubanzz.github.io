(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{405:function(s,n,a){"use strict";a.r(n);var t=a(12),e=Object(t.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"一、依赖环境安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、依赖环境安装"}},[s._v("#")]),s._v(" 一、依赖环境安装")]),s._v(" "),n("p",[n("strong",[s._v("操作系统：")]),s._v(" CentOS 7.3\n"),n("strong",[s._v("安装版本：")]),s._v(" nginx-1.14.2")]),s._v(" "),n("p",[n("strong",[s._v("安装gcc：")])]),s._v(" "),n("p",[n("code",[s._v("yum install gcc-c++")])]),s._v(" "),n("p",[n("strong",[s._v("安装其他依赖：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("yum install -y pcre pcre-devel\nyum install -y zlib zlib-devel\nyum install -y openssl openssl-devel\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p"),s._v(" "),n("h2",{attrs:{id:"二、nginx安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、nginx安装"}},[s._v("#")]),s._v(" 二、Nginx安装")]),s._v(" "),n("h4",{attrs:{id:"官网下载地址"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#官网下载地址"}},[s._v("#")]),s._v(" 官网下载地址")]),s._v(" "),n("ul",[n("li",[s._v("http://nginx.org/en/download.html")])]),s._v(" "),n("p",[n("img",{attrs:{src:"https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images51006138-d67aa280-157c-11e9-9200-4c242e11866f.png",alt:"2659012-c6605f8c454a66a3"}})]),s._v(" "),n("p"),s._v(" "),n("h4",{attrs:{id:"nginx下载包的解压"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx下载包的解压"}},[s._v("#")]),s._v(" nginx下载包的解压")]),s._v(" "),n("ul",[n("li",[s._v("Windows下载完后通过"),n("strong",[s._v("MobaXtem")]),s._v("终端模拟器将安装包上传到服务器（CentOS），通过以下命令进行解压：")])]),s._v(" "),n("p",[n("code",[s._v("tar -xzvf 压缩包文件地址 -C 解压缩到的文件夹")])]),s._v(" "),n("p"),s._v(" "),n("h4",{attrs:{id:"nginx的编译安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx的编译安装"}},[s._v("#")]),s._v(" nginx的编译安装")]),s._v(" "),n("ul",[n("li",[s._v("进入nginx目录，执行如下命令：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# --prefix可以指定安装目录\n./configure --prefix=/usr/java/nginx/nginx-1.14.2/\nmake & make install\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p"),s._v(" "),n("h4",{attrs:{id:"nginx的启动"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx的启动"}},[s._v("#")]),s._v(" nginx的启动")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("编译成功后，nginx根目录下会出现"),n("strong",[s._v("sbin文件夹")]),s._v("，进入sbin文件夹并"),n("strong",[s._v("运行nginx")]),s._v("："),n("code",[s._v("./nginx")])])]),s._v(" "),n("li",[n("p",[s._v("查看启动是否成功")])])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 启动完毕查看是否启动成功\nps -ef | grep nginx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p"),s._v(" "),n("h2",{attrs:{id:"三、nginx负载均衡的配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、nginx负载均衡的配置"}},[s._v("#")]),s._v(" 三、Nginx负载均衡的配置")]),s._v(" "),n("h3",[s._v("进入nginx目录下的conf文件夹：")]),s._v("\n \n"),n("p",[n("strong",[s._v("1.")]),s._v(" 创建"),n("strong",[s._v("vhost文件夹")]),s._v("，用于添加负载均衡的相关配置：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images51007598-0d53b700-1583-11e9-9815-e520b4d404f5.jpeg",alt:"2"}})]),s._v(" "),n("p",[n("strong",[s._v("2.")]),s._v(" 进入vhost文件夹，创建"),n("b",[s._v("*.conf文件 ")]),s._v("（如myconf.conf），加入如下配置：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("#将到120.78.151.65的请求负载到不同端口的tomcat上，weight为其权重\nupstream 120.78.151.65{\n  server 120.78.151.65:18080 weight=10;\n  server 120.78.151.65:9080 weight=1;\n}\n\nserver{\n  listen 80;  #监听的端口号\n  autoindex on;\n  server_name 120.78.151.65  #监听的服务器\n  access_log /usr/java/nginx/nginx-1.14.2/logs/access.log combined;\n  index index.jsp index.html index.htm index.php;\n\n  #将端口监听到的请求转发到如下服务器，通过上面进行负载均衡\n  location / {\n      proxy_pass http://120.78.151.65;\n  }\n  \n}\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("p",[n("strong",[s._v("3.")]),s._v(" 在nginx的conf文件夹下的nginx.conf中加入如下代码"),n("code",[s._v("include vhost/*.conf")]),s._v("，将"),n("strong",[s._v("vhost的配置文件")]),s._v("导入：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images51007928-7f78cb80-1584-11e9-8fac-dab819236657.jpeg",alt:"default"}})]),s._v(" "),n("p",[n("strong",[s._v("4.")]),s._v(" 进入"),n("strong",[s._v("sbin文件夹")])]),s._v(" "),n("ul",[n("li",[n("p",[n("strong",[s._v("关闭nginx：")]),s._v(" "),n("code",[s._v("./nginx -s stop")])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("重启nginx：")]),s._v(" "),n("code",[s._v("./nginx -s reload")])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("查看启动是否成功：")]),s._v(" "),n("code",[s._v("./nginx -t")])])])]),s._v(" "),n("p",[n("img",{attrs:{src:"https://raw.githubusercontent.com/PI-KA-CHU/Image-OSS/main/images51008235-ee0a5900-1585-11e9-854d-e1e465e7fa6c.jpeg",alt:"3"}})]),s._v(" "),n("p"),s._v(" "),n("h2",{attrs:{id:"四、nginx安装的异常及解决"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四、nginx安装的异常及解决"}},[s._v("#")]),s._v(" 四、Nginx安装的异常及解决")]),s._v(" "),n("h4",{attrs:{id:"异常"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#异常"}},[s._v("#")]),s._v(" 异常")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('nginx: [alert] could not open error log file: open() "/usr/local/nginx/logs/error.log" failed (2: No such file or directory)\n2019/01/10 19:08:56 [emerg] 6996#0: open() "/usr/local/nginx/logs/access.log" failed (2: No such file or directory)\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h4",{attrs:{id:"原因"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#原因"}},[s._v("#")]),s._v(" 原因")]),s._v(" "),n("ul",[n("li",[s._v("nginx/目录下没有"),n("strong",[s._v("logs文件夹")])])]),s._v(" "),n("h4",{attrs:{id:"解决"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解决"}},[s._v("#")]),s._v(" 解决")]),s._v(" "),n("ol",[n("li",[s._v("在"),n("strong",[s._v("nginx根目录")]),s._v("下运行如下命令：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mkdir logs\nchmod 700 logs\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("创建完logs文件夹后"),n("strong",[s._v("重新启动")]),s._v("nginx")])]),s._v(" "),n("p"),s._v(" "),n("h2",{attrs:{id:"五、nginx安装及负载均衡配置-windows环境下"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#五、nginx安装及负载均衡配置-windows环境下"}},[s._v("#")]),s._v(" 五、Nginx安装及负载均衡配置（Windows环境下）")]),s._v(" "),n("h4",{attrs:{id:"安装与配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装与配置"}},[s._v("#")]),s._v(" 安装与配置")]),s._v(" "),n("ul",[n("li",[s._v("基本步骤与Linux环境相同，如果需要修改本地域名重定向用于测试负载均衡，打开"),n("code",[s._v("C:\\Windows\\System32\\drivers\\etc")]),s._v("目录下的hosts文件，加入"),n("code",[s._v("127.0.0.1 www.test.com")]),s._v("即可将www.test.com重定向到本地")])]),s._v(" "),n("h4",{attrs:{id:"遇到的坑"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#遇到的坑"}},[s._v("#")]),s._v(" 遇到的坑")]),s._v(" "),n("ul",[n("li",[s._v("安装nginx后需要"),n("strong",[s._v("重启电脑")]),s._v("后配置的文件才能生效，否则nginx不会进行跳转")])]),s._v(" "),n("p"),s._v(" "),n("h4",{attrs:{id:"参考文献"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考文献"}},[s._v("#")]),s._v(" 参考文献")]),s._v(" "),n("ul",[n("li",[n("p",[n("a",{attrs:{href:"https://www.cnblogs.com/xxoome/p/5866475.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考一"),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://www.jianshu.com/p/deeb4bb5cedb",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考二"),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://www.jianshu.com/p/320a48fcef57",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考三"),n("OutboundLink")],1)])])]),s._v(" "),n("hr")])}),[],!1,null,null,null);n.default=e.exports}}]);