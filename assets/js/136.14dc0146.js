(window.webpackJsonp=window.webpackJsonp||[]).push([[136],{462:function(t,a,n){"use strict";n.r(a);var s=n(12),e=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"一、dubbo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、dubbo"}},[t._v("#")]),t._v(" 一、Dubbo")]),t._v(" "),a("h3",{attrs:{id:"dubbo超时问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dubbo超时问题"}},[t._v("#")]),t._v(" Dubbo超时问题")]),t._v(" "),a("p",[a("strong",[t._v("问题1")])]),t._v(" "),a("blockquote",[a("p",[t._v("服务A调用服务B dubbo接口超时，导致页面接口超时无法正常显示（情报板）")])]),t._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[a("span",{pre:!0,attrs:{class:"token exception javastacktrace language-javastacktrace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dubbo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remoting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TimeoutException"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Waiting server-side response timeout by scan timer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" start time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 2022-08-10 18"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("29"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("23"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("183, end time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 2022-08-10 18"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("29"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("38"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("214, client elapsed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0 ms, server elapsed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 15031 ms, timeout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 15000 ms, request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Request [id=1534, version=2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("2, twoway=true, event=false, broken=false, data=null], channel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /44"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("9"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("120"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("137"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("9872 -> /44"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("9"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("120"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("137"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("20887\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("at")]),t._v(" org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dubbo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remoting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exchange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("support"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DefaultFuture"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doReceived")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DefaultFuture"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("205"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ~[dubbo-2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jar!/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13]\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("at")]),t._v(" org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dubbo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remoting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exchange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("support"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DefaultFuture"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("received")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DefaultFuture"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("170"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ~[dubbo-2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jar!/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13]\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("at")]),t._v(" org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dubbo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remoting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exchange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("support"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DefaultFuture$TimeoutCheckTask"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("notifyTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DefaultFuture"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("293"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ~[dubbo-2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jar!/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13]\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("at")]),t._v(" org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dubbo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remoting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exchange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("support"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DefaultFuture$TimeoutCheckTask"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("lambda$run$0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DefaultFuture"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("280"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ~[dubbo-2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jar!/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13]\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("at")]),t._v(" org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dubbo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("common"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("threadpool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ThreadlessExecutor$RunnableWrapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ThreadlessExecutor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("196"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ~[dubbo-2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jar!/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13]\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("at")]),t._v(" org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dubbo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("common"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("threadpool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ThreadlessExecutor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("waitAndDrain")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ThreadlessExecutor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("99"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ~[dubbo-2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jar!/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13]\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("at")]),t._v(" org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dubbo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rpc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncRpcResult"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AsyncRpcResult"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("179"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ~[dubbo-2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jar!/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13]\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("at")]),t._v(" org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dubbo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rpc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("protocol"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AsyncToSyncInvoker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("invoke")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AsyncToSyncInvoker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("61"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ~[dubbo-2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jar!/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13]\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("at")]),t._v(" org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dubbo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rpc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("listener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ListenerInvokerWrapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("invoke")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ListenerInvokerWrapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("78"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ~[dubbo-2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jar!/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13]\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("at")]),t._v(" org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dubbo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("monitor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("support"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MonitorFilter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("invoke")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MonitorFilter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("91"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ~[dubbo-2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jar!/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13]\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("at")]),t._v(" org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dubbo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rpc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("protocol"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FilterNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("invoke")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("FilterNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("61"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ~[dubbo-2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jar!/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13]\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("at")]),t._v(" org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dubbo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rpc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("protocol"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dubbo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("filter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FutureFilter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("invoke")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("FutureFilter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("52"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ~[dubbo-2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jar!/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13]\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("at")]),t._v(" org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dubbo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rpc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("protocol"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FilterNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("invoke")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("FilterNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("61"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ~[dubbo-2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jar!/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13]\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("at")]),t._v(" org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dubbo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rpc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("filter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ConsumerContextFilter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("invoke")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ConsumerContextFilter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("69"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ~[dubbo-2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jar!/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13]\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("at")]),t._v(" org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dubbo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rpc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("protocol"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FilterNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("invoke")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("FilterNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("61"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ~[dubbo-2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jar!/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("13]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br")])]),a("p",[a("strong",[t._v("原因猜想")])]),t._v(" "),a("ol",[a("li",[t._v("循环依赖问题：怀疑是服务的dubbo相互调用了")]),t._v(" "),a("li",[t._v("配置问题：\n"),a("ul",[a("li",[t._v("怀疑是pro版本和dev版本配置不一致，修改并部署多次无效")]),t._v(" "),a("li",[t._v("怀疑是由于配置的dubbo超时时间太短，修改为15秒仍然无效（这是个突破口）")])])]),t._v(" "),a("li",[t._v("代码问题：怀疑是dubbo提供服务的代码、调用的代码有误，排查后没有问题")])]),t._v(" "),a("p",[a("strong",[t._v("原因分析")])]),t._v(" "),a("ul",[a("li",[t._v("排查日志：发现服务A调用服务B后，服务B确实有日志产生（查询数据库的日志），说明服务间的连通是没有问题的，但是在查看服务B的日志的时候，发现语句都是阻塞了好几条，然后才返回，怀疑是慢查询导致，从日志截取SQL并测试，发现执行时间超过25秒，问题出现了。")])]),t._v(" "),a("p",[a("strong",[t._v("解决方案")])]),t._v(" "),a("ul",[a("li",[t._v("SQL优化：经过排查后发现是pregresql的limit1效率很低导致，通过row_number替换修改，再次部署测试-正常。")])]),t._v(" "),a("p",[a("strong",[t._v("总结")])]),t._v(" "),a("ul",[a("li",[t._v("日志是非常重要的，遇到问题，先通过日志将整个思路连通（"),a("strong",[t._v("走一遍日志的链路")]),t._v("，看跟正常链路是否一致），从"),a("strong",[t._v("日志抛出的异常")]),t._v("再去思考可能的问题。")])]),t._v(" "),a("h3",{attrs:{id:"netty报内存不足问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#netty报内存不足问题"}},[t._v("#")]),t._v(" Netty报内存不足问题")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://blog.csdn.net/han0373/article/details/102815486",target:"_blank",rel:"noopener noreferrer"}},[t._v("排查参考"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://blog.csdn.net/AlbertFly/article/details/52217171",target:"_blank",rel:"noopener noreferrer"}},[t._v("windows注册表修改参考"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://blog.csdn.net/hunhun1122/article/details/79309400",target:"_blank",rel:"noopener noreferrer"}},[t._v("*windows影响TPC连接数量的注册表参数"),a("OutboundLink")],1)])]),t._v(" "),a("blockquote",[a("p",[t._v("线上环境运行一段时间后，首页登录报503错误，查看user服务日志，报下面异常，因为急着部署新版本暂时重启")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("2022-09-02 09:45:44.594  INFO [user-management-service,,] 10668 --- [eCheck-thread-1] o.a.d.r.e.s.header.ReconnectTimerTask    :  [DUBBO] Initial connection to HeaderExchangeClient [channel=org.apache.dubbo.remoting.transport.netty4.NettyClient [44.9.120.137:0 -> /44.9.120.137:20887]], dubbo version: 2.7.13, current host: 44.9.120.137\n2022-09-02 09:45:44.596 ERROR [user-management-service,,] 10668 --- [eCheck-thread-1] o.a.d.r.e.s.header.ReconnectTimerTask    :  [DUBBO] Fail to connect to HeaderExchangeClient [channel=org.apache.dubbo.remoting.transport.netty4.NettyClient [44.9.120.137:0 -> /44.9.120.137:20887]], dubbo version: 2.7.13, current host: 44.9.120.137\n\norg.apache.dubbo.remoting.RemotingException: client(url: dubbo://44.9.120.137:20887/com.alibaba.cloud.dubbo.service.DubboMetadataService?anyhost=true&application=user-management-service&bind.ip=44.9.120.137&bind.port=20887&check=false&codec=dubbo&connect.lazy.initial.state=true&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&group=uid-generator-component&heartbeat=60000&interface=com.alibaba.cloud.dubbo.service.DubboMetadataService&methods=getAllServiceKeys,getServiceRestMetadata,getExportedURLs,getAllExportedURLs&pid=10668&qos.enable=false&reference.filter=tracing&register.ip=44.9.120.137&release=2.7.13&remote.application=uid-generator-component&revision=2.2.7.RELEASE&router=-default,revisionRouter&sca_revision=FE64595134BB27055D693A3087AD11FF&send.reconnect=true&service.filter=tracing&service.name=ServiceBean:uid-generator-component/com.alibaba.cloud.dubbo.service.DubboMetadataService:1.0.0&side=consumer&sticky=false&timestamp=1660206766023&version=1.0.0) failed to connect to server /44.9.120.137:20887, error message is:No buffer space available (maximum connections reached?): connect: /44.9.120.137:20887\n\tat org.apache.dubbo.remoting.transport.netty4.NettyClient.doConnect(NettyClient.java:169) ~[dubbo-2.7.13.jar!/:2.7.13]\n\tat org.apache.dubbo.remoting.transport.AbstractClient.connect(AbstractClient.java:198) ~[dubbo-2.7.13.jar!/:2.7.13]\n\tat org.apache.dubbo.remoting.transport.AbstractClient.reconnect(AbstractClient.java:254) ~[dubbo-2.7.13.jar!/:2.7.13]\n\tat org.apache.dubbo.remoting.exchange.support.header.HeaderExchangeClient.reconnect(HeaderExchangeClient.java:166) ~[dubbo-2.7.13.jar!/:2.7.13]\n\tat org.apache.dubbo.remoting.exchange.support.header.ReconnectTimerTask.doTask(ReconnectTimerTask.java:49) ~[dubbo-2.7.13.jar!/:2.7.13]\n\tat org.apache.dubbo.remoting.exchange.support.header.AbstractTimerTask.run(AbstractTimerTask.java:87) [dubbo-2.7.13.jar!/:2.7.13]\n\tat org.apache.dubbo.common.timer.HashedWheelTimer$HashedWheelTimeout.expire(HashedWheelTimer.java:648) [dubbo-2.7.13.jar!/:2.7.13]\n\tat org.apache.dubbo.common.timer.HashedWheelTimer$HashedWheelBucket.expireTimeouts(HashedWheelTimer.java:727) [dubbo-2.7.13.jar!/:2.7.13]\n\tat org.apache.dubbo.common.timer.HashedWheelTimer$Worker.run(HashedWheelTimer.java:449) [dubbo-2.7.13.jar!/:2.7.13]\n\tat java.lang.Thread.run(Thread.java:750) [na:1.8.0_321]\nCaused by: io.netty.channel.AbstractChannel$AnnotatedSocketException: No buffer space available (maximum connections reached?): connect: /44.9.120.137:20887\nCaused by: java.net.SocketException: No buffer space available (maximum connections reached?): connect\n\tat sun.nio.ch.Net.connect0(Native Method) ~[na:1.8.0_321]\n\tat sun.nio.ch.Net.connect(Net.java:459) ~[na:1.8.0_321]\n\tat sun.nio.ch.Net.connect(Net.java:451) ~[na:1.8.0_321]\n\tat sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:646) ~[na:1.8.0_321]\n\tat io.netty.util.internal.SocketUtils$3.run(SocketUtils.java:91) ~[netty-common-4.1.51.Final.jar!/:4.1.51.Final]\n\tat io.netty.util.internal.SocketUtils$3.run(SocketUtils.java:88) ~[netty-common-4.1.51.Final.jar!/:4.1.51.Final]\n\tat java.security.AccessController.doPrivileged(Native Method) ~[na:1.8.0_321]\n\tat io.netty.util.internal.SocketUtils.connect(SocketUtils.java:88) ~[netty-common-4.1.51.Final.jar!/:4.1.51.Final]\n\tat io.netty.channel.socket.nio.NioSocketChannel.doConnect(NioSocketChannel.java:315) ~[netty-transport-4.1.51.Final.jar!/:4.1.51.Final]\n\tat io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.connect(AbstractNioChannel.java:248) ~[netty-transport-4.1.51.Final.jar!/:4.1.51.Final]\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.connect(DefaultChannelPipeline.java:1342) ~\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br")])]),a("p",[a("strong",[t._v("原因分析")])]),t._v(" "),a("p",[t._v("Socket基于TPC连接，而TCP包括三次握手和两次挥手的过程，主动挥手的一方存在2MSL的等待时间，如果大量请求进入此状态则连接无法被释放，进而报缓冲区内存不足的问题，所以考虑可能是以下问题：")]),t._v(" "),a("ul",[a("li",[t._v("检查服务器的最大连接限制，太低则调高")]),t._v(" "),a("li",[t._v("检查当前的Time-Wait连接数量，可以打开复用或者调低时间")]),t._v(" "),a("li",[t._v("Socket连接泄露，导致连接不能被及时释放")])]),t._v(" "),a("ol",[a("li",[t._v("通过"),a("code",[t._v("netstat -ano")]),t._v("发现大量socket连接被创建，其中pid为8428的最多")]),t._v(" "),a("li",[t._v("通过"),a("code",[t._v('netstat -ano | find /i /c "8428"')]),t._v("统计连接数量，为10w多个连接，问题出现，说明是该pid的服务连接泄露或者大量创建连接导致")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/images/image-20220902131000963.png",alt:"image-20220902131000963"}})]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("在任务管理器查看对应pid的应用，发现为情报板发布服务，而情报板发布采用netty框架，说明是连接创建有问题，每次发布都创建了新的连接，这是有问题的")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/images/image-20220902131330235.png",alt:"image-20220902131330235"}})]),t._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[t._v("检查对应服务的netty代码，发现每次发送数据到情报板都建立了新连接")])]),t._v(" "),a("p",[a("strong",[t._v("解决方案")])]),t._v(" "),a("ul",[a("li",[t._v("修改netty连接建立的代码，用concurrentHashMap缓存客户端连接（key为"),a("code",[t._v("ip+port")]),t._v("）")])]),t._v(" "),a("h2",{attrs:{id:"二、springboot"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、springboot"}},[t._v("#")]),t._v(" 二、SpringBoot")]),t._v(" "),a("h3",{attrs:{id:"springboot项目启动缓慢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#springboot项目启动缓慢"}},[t._v("#")]),t._v(" SpringBoot项目启动缓慢")]),t._v(" "),a("p",[a("strong",[t._v("描述")]),t._v("：某次在启动项目的时候，发现SpringBoot启动速度特别慢，启动一次需要十分钟左右，其他服务启动又是正常的。")]),t._v(" "),a("p",[a("strong",[t._v("解决")]),t._v("：查阅后发现是因为断点加错位置，打在了方法上，导致启动缓慢（这有点魔性），关掉断点后重启正常")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://blog.csdn.net/yyj108317/article/details/110383255",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),a("OutboundLink")],1)])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/imagesimage-20220929102012172.png",alt:"image-20220929102012172"}})]),t._v(" "),a("h3",{attrs:{id:"springboot部署启动异常"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#springboot部署启动异常"}},[t._v("#")]),t._v(" SpringBoot部署启动异常")]),t._v(" "),a("p",[t._v("异常：在Idea启动正常，但是在打包成jar包运行后")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Caused by: java.lang.IllegalStateException: Failed to introspect Class\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"三、内存问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、内存问题"}},[t._v("#")]),t._v(" 三、内存问题")]),t._v(" "),a("p",[a("strong",[t._v("Windows服务内存不足")])]),t._v(" "),a("p",[a("strong",[t._v("问题描述")]),t._v("：上午查看服务的时候，发现有几个服务挂掉了，并且重新启动也一直启动失败，错误日志如下（看起来是因为默认的堆内存太大，没有足够的内存初始化VM）")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/imagesimage-20221013122529817.png",alt:"image-20221013122529817"}})]),t._v(" "),a("p",[a("strong",[t._v("解决过程")]),t._v("：")]),t._v(" "),a("ol",[a("li",[t._v("检查内存，调小JVM的堆参数仍然无法启动（后面发现实际就是物理内存已经满了，所以目标是减少当前物理内存的使用，也就是减少各个微服务占用的内存）")]),t._v(" "),a("li",[t._v("进入任务管理器，右键下面空白处，将命令行显示出来，找到内存占用最大的服务，通过命令行可以知道是哪个服务")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/imagesimage-20221013122505645.png",alt:"image-20221013122505645"}})]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("关闭对应服务，并调小堆内存，重新启动，再启动其他服务，正常")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("-jar parking-management-service-1.0.0-SNAPSHOT.jar -Xmx3072m -Xms3072m\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("strong",[t._v("总结")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("在物理内存有限制的情况下，需要限制服务的JVM堆大小")]),t._v(" "),a("li",[t._v("当内存不足时，可以检查是否是其他服务JVM堆太大、本身的内存泄露")])]),t._v(" "),a("h2",{attrs:{id:"四、其他"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、其他"}},[t._v("#")]),t._v(" 四、其他")]),t._v(" "),a("ol",[a("li",[t._v("连接sqlserver")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Caused by: org.apache.ibatis.exceptions.PersistenceException: \n### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.microsoft.sqlserver.jdbc.SQLServerException: 驱动程序无法通过使用安全套接字层(SSL)加密与 SQL Server 建立安全连接。错误:“The server selected protocol version TLS10 is not accepted by client preferences [TLS12]”。 ClientConnectionId:5164aaa9-ca22-469d-8624-879f2c7de76e\n### The error may exist in com/feida/mybatis/mapper/AiValueMapper.xml\n### The error may involve com.feida.mybatis.mapper.AiValueMapper.selectAllByDate\n### The error occurred while executing a query\n### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.microsoft.sqlserver.jdbc.SQLServerException: 驱动程序无法通过使用安全套接字层(SSL)加密与 SQL Server 建立安全连接。错误:“The server selected protocol version TLS10 is not accepted by client preferences [TLS12]”。 ClientConnectionId:5164aaa9-ca22-469d-8624-879f2c7de76e\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);