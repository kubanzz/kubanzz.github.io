(window.webpackJsonp=window.webpackJsonp||[]).push([[129],{454:function(e,s,a){"use strict";a.r(s);var r=a(12),t=Object(r.a)({},(function(){var e=this,s=e._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h2",{attrs:{id:"一、docker安装-centos7"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、docker安装-centos7"}},[e._v("#")]),e._v(" 一、Docker安装（Centos7）")]),e._v(" "),s("ul",[s("li",[e._v("1、Docker要求Centos内核要高于3.10，所以首先应该检查是否满足要求（如果是本地虚拟机，需要保证可以联网，可以通过"),s("code",[e._v("ping")]),e._v("检测）")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("uname -r\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("ul",[s("li",[e._v("2、使用 root 权限登录 Centos。确保 "),s("code",[e._v("yum")]),e._v(" 包更新到最新。")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("sudo yum update\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("ul",[s("li",[e._v("3、卸载旧版本(如果安装过旧版本的话)")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("sudo yum remove docker  docker-common docker-selinux docker-engine\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("ul",[s("li",[e._v("4、安装需要的软件包， "),s("code",[e._v("yum-util")]),e._v(" 提供"),s("code",[e._v("yum-config-manager")]),e._v("功能，另外两个是"),s("code",[e._v("devicemapper")]),e._v("驱动依赖的")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("sudo yum install -y yum-utils device-mapper-persistent-data lvm2\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("ul",[s("li",[e._v("5、设置yum源")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# 阿里云版（推荐）\nsudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n\n# 官方版（国内速度慢）\nsudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br")])]),s("ul",[s("li",[e._v("6、可以查看所有仓库中所有docker版本，并选择特定版本安装")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("yum list docker-ce --showduplicates | sort -r\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/images62308234-a1518580-b4b7-11e9-9373-96c8f5d10fac.png",alt:"image"}})]),e._v(" "),s("ul",[s("li",[e._v("7、更新 yum 软件源缓存，并安装 docker")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# 更新 yum 软件源缓存\nsudo yum makecache fast\n\n# 默认安装最新版本\nsudo yum install docker-ce\n# 指定版本下载，例如：sudo yum install docker-ce-17.12.0.ce\nsudo yum install <FQPN>\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br")])]),s("ul",[s("li",[e._v("8、启动并加入开机自启")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("sudo systemctl start docker\nsudo systemctl enable docker\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("ul",[s("li",[e._v("9、验证安装是否成功")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("docker version\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/images62308781-b24ec680-b4b8-11e9-9f05-2836cf7d09d7.png",alt:"image"}})]),e._v(" "),s("ul",[s("li",[e._v("10、Docker镜像加速器")])]),e._v(" "),s("p",[e._v("添加镜像加上文件")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('# 在 /etc/docker/daemon.json 中写入如下内容（如果文件不存在请新建该文件）\n{\n  "registry-mirrors": [\n    "https://docker.mirrors.ustc.edu.cn"\n  ]\n}\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br")])]),s("p",[e._v("重新服务")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("sudo systemctl restart docker\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p"),e._v(" "),s("h2",{attrs:{id:"二、docker常见命令-以redis为例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、docker常见命令-以redis为例"}},[e._v("#")]),e._v(" 二、Docker常见命令（以Redis为例）")]),e._v(" "),s("ul",[s("li",[e._v("镜像拉取")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("docker pull redis:latest\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/images62311135-b5988100-b4bd-11e9-87a3-51cdfa3c552e.png",alt:"image"}})]),e._v(" "),s("ul",[s("li",[e._v("获取本地镜像列表")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("docker image ls / docker images\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/images62311308-2344ad00-b4be-11e9-8e8d-abbb10aa00c6.png",alt:"image"}})]),e._v(" "),s("ul",[s("li",[e._v("运行镜像")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("docker run 镜像名称 &   # 注: &表示后台运行\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("ul",[s("li",[e._v("删除本地镜像")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("docker image rm <镜像>  # 注：<镜像>可以是 镜像短 ID、镜像长 ID、镜像名 或者 镜像摘要\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("blockquote",[s("p",[e._v('问题：删除的时候可能会报镜像被容器引用的异常：\nError response from daemon: conflict: unable to remove repository reference "hello-world" (must > > force) - container d4f4b4789f90 is using its referenced image fce289e99eb9')]),e._v(" "),s("p",[e._v("解决：输入命令 "),s("code",[e._v("docker ps -a")]),e._v(" 显示当前所有容器（包括未运行的），然后使用 "),s("code",[e._v("docker rm 容器ID")]),e._v(" > 将其删除后即可正常删除镜像。")])]),e._v(" "),s("ul",[s("li",[e._v("查看容器")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("docker ps -a   # 注：-a表示查看所有容器，包括未运行的，不加只显示当前运行的容器\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("ul",[s("li",[e._v("容器启动、重启及停止")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("docker start container_name/container_id\ndocker stop container_name/container_id\ndocker restart container_name/container_id\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("ul",[s("li",[e._v("删除容器")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("docker rm container_name/container_id\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("ul",[s("li",[e._v("删除所有停止的容器")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("docker rm $(docker ps -a -q)\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("ul",[s("li",[e._v("查看docker信息")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("docker info\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("ul",[s("li",[e._v("查找Docker Hub上的nginx镜像")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("docker search nginx\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p"),e._v(" "),s("h2",{attrs:{id:"三、参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、参考"}},[e._v("#")]),e._v(" 三、参考")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.cnblogs.com/yufeng218/p/8370670.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考一"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://www.funtl.com/zh/docs-docker/CentOS-%E5%AE%89%E8%A3%85-Docker.html#%E4%BD%BF%E7%94%A8-yum-%E5%AE%89%E8%A3%85",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考二"),s("OutboundLink")],1)]),e._v(" "),s("li",[e._v("镜像加速： "),s("a",{attrs:{href:"https://blog.csdn.net/qq_37495786/article/details/83246421",target:"_blank",rel:"noopener noreferrer"}},[e._v("链接"),s("OutboundLink")],1)]),e._v(" "),s("li",[e._v("redis镜像： "),s("a",{attrs:{href:"https://blog.csdn.net/cookily_liangzai/article/details/80726163",target:"_blank",rel:"noopener noreferrer"}},[e._v("链接"),s("OutboundLink")],1)]),e._v(" "),s("li",[e._v("Docker命令： "),s("a",{attrs:{href:"https://snailclimb.top/JavaGuide/#/tools/Docker-Image?id=%E4%B8%80-docker-%E4%B8%8B%E8%BD%BD%E9%95%9C%E5%83%8F",target:"_blank",rel:"noopener noreferrer"}},[e._v("链接"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"http://www.ityouknow.com/docker/2018/03/07/docker-introduction.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考三"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=t.exports}}]);