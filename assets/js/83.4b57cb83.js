(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{406:function(t,a,s){"use strict";s.r(a);var v=s(12),e=Object(v.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"一、tomcat的安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、tomcat的安装"}},[t._v("#")]),t._v(" 一、Tomcat的安装")]),t._v(" "),a("ul",[a("li",[t._v("单个Tomcat的安装（包括基本"),a("strong",[t._v("JDK")]),t._v("，"),a("strong",[t._v("Mysql")]),t._v("环境搭建）具体可参考这边笔记#20 ，现在需要将多个Tomcat安装到服务器上（下面安装的是两个），按照单个安装那样，通过Linux命令将Tomcat安装到"),a("strong",[t._v("不同目录")]),t._v("下：")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/images50751735-09275100-1286-11e9-8e5d-09adf3e2e030.jpeg",alt:"2"}})]),t._v(" "),a("p"),t._v(" "),a("h2",{attrs:{id:"二、tomcat的端口的修改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、tomcat的端口的修改"}},[t._v("#")]),t._v(" 二、Tomcat的端口的修改")]),t._v(" "),a("blockquote",[a("p",[t._v("修改不同Tomcat的端口以避免同时启动时的冲突，"),a("strong",[t._v("第一个Tomcat")]),t._v("可以不做修改，保持"),a("strong",[t._v("默认端口")]),t._v("即可，多个Tomcat的端口可以按照+1000的形式进行添加，比如默认端口为8080，则第二个Tomcat的端口可设置为9080，方便记忆。")])]),t._v(" "),a("p",[a("strong",[t._v("1. 命令行打开的server.xml文件：（第二个Tomcat）")])]),t._v(" "),a("p",[a("code",[t._v("sudo vim /usr/java/tomcat2/apache-tomcat-8.5.35/conf/server.xml")])]),t._v(" "),a("p",[a("strong",[t._v("2. 修改三个位置的端口号：（只修改port属性的端口即可）")])]),t._v(" "),a("ul",[a("li",[t._v("默认为"),a("strong",[t._v("8005")]),t._v("，用于监听Tomcat的关闭")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/images50753632-75598300-128d-11e9-8f95-0a3868b30322.jpeg",alt:"1"}})]),t._v(" "),a("ul",[a("li",[t._v("默认为"),a("strong",[t._v("8080")]),t._v("，用于监听客户端请求，如果发送的是"),a("strong",[t._v("https 请求")]),t._v(". 就将请求转发到"),a("strong",[t._v("8443")]),t._v(" 端口.，加入"),a("code",[t._v("URIEncoding=“UTF-8”")]),t._v("可以防止Tomcat"),a("strong",[t._v("乱码")])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/images50753636-77bbdd00-128d-11e9-86c0-5e026d115277.jpeg",alt:"2"}})]),t._v(" "),a("ul",[a("li",[t._v("默认为"),a("strong",[t._v("8009")]),t._v("，用于接收其他服务器转发过来的请求")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/images50753647-7d192780-128d-11e9-9d92-f746730a14ea.jpeg",alt:"3"}})]),t._v(" "),a("p"),t._v(" "),a("h2",{attrs:{id:"三、系统环境变量的修改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、系统环境变量的修改"}},[t._v("#")]),t._v(" 三、系统环境变量的修改")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("为了防止多个Tomcat冲突问题，将安装的Tomcat路径都加入系统环境变量中，并通过修改Tomcat的server.xml配置其启动路径。")])]),t._v(" "),a("li",[a("p",[t._v("CentOS目录下"),a("code",[t._v("/etc/profile")]),t._v("文件，在其最底部加入下面代码，下面代码的等号右边都是自己安装的"),a("strong",[t._v("Tomcat的路径")]),t._v("：")])])]),t._v(" "),a("p",[t._v("（"),a("strong",[t._v("CATALINA_BASE，CATALINA_HOME，TOMCAT_HOME")]),t._v("是Tomcat的默认启动路径，如果想要修改其启动路径，需要在Tomcat的"),a("strong",[t._v("server.xml")]),t._v("文件中进行配置）")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("#set tomcat environment\nexport CATALINA_BASE=/usr/java/tomcat1/apache-tomcat-8.5.35\nexport CATALINA_HOME=/usr/java/tomcat1/apache-tomcat-8.5.35\nexport TOMCAT_HOME=/usr/java/tomcat1/apache-tomcat-8.5.35\n\nexport CATALINA_2_BASE=/usr/java/tomcat2/apache-tomcat-8.5.35\nexport CATALINA_2_HOME=/usr/java/tomcat2/apache-tomcat-8.5.35\nexport TOMCAT_2_HOME=/usr/java/tomcat2/apache-tomcat-8.5.35\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("ul",[a("li",[t._v("修改完成并保存后需要更新配置，可以使用下面命令进行更新，或者重启服务器：")])]),t._v(" "),a("p",[a("code",[t._v("source /etc/profile")])]),t._v(" "),a("p"),t._v(" "),a("h2",{attrs:{id:"四、tomcat启动路径的修改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、tomcat启动路径的修改"}},[t._v("#")]),t._v(" 四、Tomcat启动路径的修改")]),t._v(" "),a("blockquote",[a("p",[t._v("用linux的vim命令编辑"),a("strong",[t._v("第二个Tomcat")]),t._v("（第一个Tomcat使用默认路径即可，可以不做修改）安装目录下的bin/"),a("strong",[t._v("catalina.sh")]),t._v("文件，或者直接用模拟器内置的Text编辑器打开，找到如下位置（红框内的为需要加入的代码）：")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/images50752640-e860fa80-1289-11e9-8d10-5d91e7dbce19.jpeg",alt:"3"}})]),t._v(" "),a("p"),t._v(" "),a("ol",[a("li",[a("strong",[t._v("文件打开命令：")])])]),t._v(" "),a("p",[a("code",[t._v("sudo vim /usr/java/tomcat2/apache-tomcat-8.5.35/bin/catalina.sh")])]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("strong",[t._v("加入代码")]),t._v("（等号右边为上一步配置的相应Tomcat的"),a("strong",[t._v("环境变量")]),t._v("，修改后保存）：")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("CATALINA_BASE=$CATALINA_2_BASE\nCATALINA_HOME=$CATALINA_2_HOME\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p"),t._v(" "),a("h2",{attrs:{id:"五、疑难杂症"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、疑难杂症"}},[t._v("#")]),t._v(" 五、疑难杂症")]),t._v(" "),a("p",[a("strong",[t._v("1. 填坑总结：")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("如果要修改Tomcat端口，需要"),a("strong",[t._v("先关闭tomcat，再修改端口")]),t._v("，否则可能出现端口一直被占用的情况，此时只能重启服务器（个人方法）。")])]),t._v(" "),a("li",[a("p",[t._v("进行集群tomcat配置的时候，需要修改"),a("strong",[t._v("防火墙入站规则")]),t._v("，即加入允许访问的端口（阿里云服务器可以在"),a("strong",[t._v("控制台")]),t._v("的入站规则里修改），否则一直出现503！！！")])])]),t._v(" "),a("p",[a("strong",[t._v("2. 学习成果：")])]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("netstat -an | grep 8080")]),t._v("：可以查看端口的占用情况")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("sudo vim server.xml")]),t._v("：以默认权限（管理员）修改文件")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("echo $CATALINA_BASE")]),t._v("：可以查看环境变量是否生效")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("reboot")]),t._v("：重启服务器")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("source /etc/profile")]),t._v("：更新配置文件，使得配置生效")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);