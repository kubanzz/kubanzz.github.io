(window.webpackJsonp=window.webpackJsonp||[]).push([[142],{468:function(t,e,a){"use strict";a.r(e);var r=a(12),_=Object(r.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"一、mysql事务隔离级别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、mysql事务隔离级别"}},[t._v("#")]),t._v(" 一、MySQL事务隔离级别")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/images62423636-9421da00-b6f5-11e9-8d9e-80a969faca2d.png",alt:"image"}})]),t._v(" "),e("h4",{attrs:{id:"_1-1、未提交读-read-uncommitted"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1、未提交读-read-uncommitted"}},[t._v("#")]),t._v(" 1.1、未提交读（read uncommitted）")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/images62423550-52446400-b6f4-11e9-8b84-606080dc5367.png",alt:"image"}})]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("特点")]),t._v("：事务A执行修改语句，但是事务未结束，此时事务B可以读取事务A的修改语句的结果（此时数据库尚未修改）")]),t._v(" "),e("li",[e("strong",[t._v("问题")]),t._v("：出现"),e("code",[t._v("脏读")]),t._v("现象，如A回滚了，但是B读取到的是A修改的数据。")])]),t._v(" "),e("h4",{attrs:{id:"_1-2、已提交读-read-committed"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2、已提交读-read-committed"}},[t._v("#")]),t._v(" 1.2、已提交读（read committed ）")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/images62423561-8750b680-b6f4-11e9-9154-4062f530ed0f.png",alt:"image"}})]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("特点")]),t._v("：事务A执行修改语句且提交事务后，事务B才可以读取。（"),e("strong",[t._v("SQLServer 、Oracle的默认隔离级别")]),t._v("）")]),t._v(" "),e("li",[e("strong",[t._v("问题")]),t._v("：出现"),e("code",[t._v("不可重复读问题")]),t._v("，如A执行事务中读取了B事务（已提交）修改的结果，然后在A事务还没结束的时候，B事务再次修改该属性，A事务再次查询时得到了不同的结果。")])]),t._v(" "),e("h4",{attrs:{id:"_1-3、可重复读-repeatable-read"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-3、可重复读-repeatable-read"}},[t._v("#")]),t._v(" 1.3、可重复读（repeatable read ）")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/images62423632-80767380-b6f5-11e9-936d-b0815fb494c1.png",alt:"image"}})]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("特点")]),t._v("：事务A读取事务B的数据，事务B即使在事务A未结束前再次修改，事务A读取的数据仍然是第一次读取到的数据（快照）。（"),e("strong",[t._v("MySQL默认隔离级别")]),t._v("）")]),t._v(" "),e("li",[e("strong",[t._v("问题")]),t._v("：出现"),e("code",[t._v("幻读")]),t._v("（插入数据时）问题，如事务A提交了修改某范围内表数据的事务，但是此时事务B插入了某条数据，事务A再次读取时，会出现幻行现象（幻读）。")]),t._v(" "),e("li",[e("strong",[t._v("解决")]),t._v("：加上检索范围锁，锁为只可读。")])]),t._v(" "),e("h4",{attrs:{id:"_1-4、串行化-serializable"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-4、串行化-serializable"}},[t._v("#")]),t._v(" 1.4、串行化（serializable）")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/images62423637-9a17bb00-b6f5-11e9-8dbe-7bdb519a7acb.png",alt:"image"}})]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("特点")]),t._v("：当启动 "),e("code",[t._v("serializable")]),t._v(" 隔离级别时，其他事务对表的写操作都将被挂起，故"),e("code",[t._v("不会产生不可重复读、幻读、脏读的问题")]),t._v("。但是由于同步化的特性，其"),e("code",[t._v("性能较差")]),t._v("，一般不使用。")])]),t._v(" "),e("p"),t._v(" "),e("h2",{attrs:{id:"二、spring的事务管理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、spring的事务管理"}},[t._v("#")]),t._v(" 二、Spring的事务管理")]),t._v(" "),e("h4",{attrs:{id:"_2-1、spring事务隔离-5种-如上面的4种-1种默认-其中的默认隔离是指采用数据库的隔离级别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1、spring事务隔离-5种-如上面的4种-1种默认-其中的默认隔离是指采用数据库的隔离级别"}},[t._v("#")]),t._v(" 2.1、Spring事务隔离（5种，如上面的"),e("code",[t._v("4种 + 1种默认")]),t._v("，其中的默认隔离是指采用数据库的隔离级别）")]),t._v(" "),e("h4",{attrs:{id:"_2-2、spring的事务传播行为-7种"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2、spring的事务传播行为-7种"}},[t._v("#")]),t._v(" 2.2、Spring的事务传播行为（7种）")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("事务的传播指"),e("code",[t._v("两个事务方法")]),t._v("之间的调用行为")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("支持当前事务的")]),t._v("：\n"),e("ul",[e("li",[e("code",[t._v("PROPAGATION_REQUIRED")]),t._v("：存在事务在加入、不存在则开启")]),t._v(" "),e("li",[e("code",[t._v("PROPAGATION_SUPPORTS")]),t._v("：存在事务则加入")]),t._v(" "),e("li",[e("code",[t._v("PROPAGATION_MANDATORY")]),t._v("：存在事务则加入、不存在则抛出异常")])])]),t._v(" "),e("li",[e("strong",[t._v("不支持当前事务的")]),t._v("：\n"),e("ul",[e("li",[e("code",[t._v("PROPAGATION_REQUIRES_NEW")]),t._v("：存在事务则挂起并开启新事务")]),t._v(" "),e("li",[e("code",[t._v("PROPAGATION_NOT_SUPPORTED")]),t._v("：存在事务则被挂起")]),t._v(" "),e("li",[e("code",[t._v("PROPAGATION_NEVER")]),t._v("：存在事务则抛出异常")]),t._v(" "),e("li",[e("code",[t._v("PROPAGATION_NESTED")]),t._v("：不太明白\n ")])])])])])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/images62423747-0f37c000-b6f7-11e9-8f2a-785e462d0d72.png",alt:"image"}})]),t._v(" "),e("p",[e("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/images62423792-01cf0580-b6f8-11e9-958f-502aef4df1bd.png",alt:"image"}})]),t._v(" "),e("p"),t._v(" "),e("h4",{attrs:{id:"_2-3、spring事务管理-1种编程式事务-3中声明式事务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-3、spring事务管理-1种编程式事务-3中声明式事务"}},[t._v("#")]),t._v(" 2.3、Spring事务管理（1种编程式事务 + 3中声明式事务）")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("Spring事务管理方法")]),t._v("：\n"),e("ul",[e("li",[e("strong",[t._v("编程式事务")]),t._v("："),e("em",[t._v("一般不用")]),t._v(" "),e("ul",[e("li",[t._v("1、在XML中配置事务管理相关的Bean，并配置注入模板中")]),t._v(" "),e("li",[t._v("2、在代码中调用注入好的模板的"),e("code",[t._v("beginTransaction()")]),t._v("、"),e("code",[t._v("commit()")]),t._v("、"),e("code",[t._v("rollback()")]),t._v("等事务管理相关的方法")])])]),t._v(" "),e("li",[e("strong",[t._v("声明式事务")]),t._v(" "),e("ul",[e("li",[t._v("基于TransactionProxyFactoryBean的方式："),e("em",[t._v("很少用")])]),t._v(" "),e("li",[t._v("基于AspectJ的声明式事务："),e("em",[t._v("常用")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("XML方式")]),t._v("：通过XML配置（#63）")]),t._v(" "),e("li",[e("strong",[t._v("注解方式")]),t._v("：通过在业务方法上加"),e("code",[t._v("@Transactional")]),t._v("实现")])])])])])])])]),t._v(" "),e("p"),t._v(" "),e("h2",{attrs:{id:"三、参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、参考"}},[t._v("#")]),t._v(" 三、参考")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("MySQL事务隔离")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://baijiahao.baidu.com/s?id=1629344395894429251&wfr=spider&for=pc",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考一"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.jianshu.com/p/4e3edbedb9a8",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考二"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/qq_35433593/article/details/86094028",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考三"),e("OutboundLink")],1)])])]),t._v(" "),e("li",[e("p",[t._v("Spring事务管理")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://blog.csdn.net/liuwenbiao1203/article/details/52439835",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考一"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/weixin_39625809/article/details/80707695",target:"_blank",rel:"noopener noreferrer"}},[t._v("事务传播"),e("OutboundLink")],1)])])])])])}),[],!1,null,null,null);e.default=_.exports}}]);