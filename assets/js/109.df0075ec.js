(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{436:function(s,n,a){"use strict";a.r(n);var e=a(12),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"一、oozie的定时任务方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、oozie的定时任务方式"}},[s._v("#")]),s._v(" 一、Oozie的定时任务方式")]),s._v(" "),n("h3",{attrs:{id:"_1-1-官方定义"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-官方定义"}},[s._v("#")]),s._v(" 1.1 官方定义")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/images62443388-53759f80-b78d-11e9-8e8d-e3cd9f16227c.png",alt:"image"}})]),s._v(" "),n("h3",{attrs:{id:"_1-2-corntab方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-corntab方式"}},[s._v("#")]),s._v(" 1.2 corntab方式")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/images62443589-d72f8c00-b78d-11e9-9935-e1b8d103e331.png",alt:"image"}})]),s._v(" "),n("p",[n("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/images62443622-ef071000-b78d-11e9-9f77-75cab0326c85.png",alt:"image"}})]),s._v(" "),n("p"),s._v(" "),n("h2",{attrs:{id:"二、编写定时任务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、编写定时任务"}},[s._v("#")]),s._v(" 二、编写定时任务")]),s._v(" "),n("h3",{attrs:{id:"_2-1-代码编写"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-代码编写"}},[s._v("#")]),s._v(" 2.1 代码编写")]),s._v(" "),n("p",[n("strong",[s._v("job.properties")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("nameNode=hdfs://hh:8020\njobTracker=hh:8032\nqueueName=qcpj_access_log_queue\nexamplesRoot=accessLogAnalyze\n\n# workflow参数为 oozie.wf.application.path\noozie.coord.application.path=${nameNode}/oozie/workflows/qcpj/${examplesRoot}\n\nstart=2019-08-05T23:00+0800\nend=2099-08-05T23:30+0800\nworkflowAppUri=${nameNode}/oozie/workflows/qcpj/${examplesRoot}\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[n("strong",[s._v("workflow.xml")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<workflow-app name=\'qcpj_accessLog_analyze\' xmlns="uri:oozie:workflow:0.3">\n    <start to="accessLogAnalyze"/>\n\n    \x3c!-- 分析accessLog日志数据 --\x3e\n    <action name="accessLogAnalyze">\n        <java>\n            <job-tracker>${jobTracker}</job-tracker>\n            <name-node>${nameNode}</name-node>\n            <main-class>com.bnuz.qcpj.mr.accessLogAnalyze.AccessLogRunner</main-class>\n        </java>\n        <ok to="eventCountRunner"/>\n        <error to="kill"/>\n    </action>\n\n    \x3c!-- 统计相关事件数量 --\x3e\n    <action name="eventCountRunner">\n        <java>\n            <job-tracker>${jobTracker}</job-tracker>\n            <name-node>${nameNode}</name-node>\n            <main-class>com.bnuz.qcpj.mr.accessLogEventCount.EventCountRunner</main-class>\n        </java>\n        <ok to="end"/>\n        <error to="kill"/>\n    </action>\n\n    <kill name="kill">\n        <message>mapreduce failed, error message:${wf:errorMessage(wf:lastErrorNode())}</message>\n    </kill>\n    <end name="end"/>\n</workflow-app>\n\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br")])]),n("p",[n("strong",[s._v("coordinator.xml")])]),s._v(" "),n("ul",[n("li",[s._v("修改时区"),n("code",[s._v("timezone")])]),s._v(" "),n("li",[s._v("修改版本"),n("code",[s._v("xmlns")])])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<coordinator-app name="qcpj_access_log_analyze_coor" frequency="${coord:minutes(5)}" start="${start}" end="${end}" timezone="GMT+0800" xmlns="uri:oozie:coordinator:0.2">\n\t<action>\n\t\t<workflow>\n            <app-path>${workflowAppUri}</app-path>\n\t\t\t<configuration>\n\t\t\t\t<property>\n\t\t\t\t\t<name>jobTracker</name>\n\t\t\t\t\t<value>${jobTracker}</value>\n                </property>\n                <property>\n                    <name>nameNode</name>\n                    <value>${nameNode}</value>\n\t\t\t\t</property>\n\t\t\t\t<property>\n\t\t\t\t\t<name>queueName</name>\n\t\t\t\t\t<value>${queueName}</value>\n\t\t\t\t</property>\n\t\t\t</configuration>\n     \t\t</workflow>\n\t</action>\n</coordinator-app>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("h3",{attrs:{id:"_2-2-任务操作命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-任务操作命令"}},[s._v("#")]),s._v(" 2.2 任务操作命令")]),s._v(" "),n("p",[s._v("（以下命令在任务目录下执行，作业Id可以在Oozie Web主页中查看）")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 提交任务（提交后为PRE状态）\noozie job -oozie http://hh:11000/oozie -config job.properties -submit\n\n# 开始任务(指定jobId，PRE -> RUN)\noozie job -oozie http://hh:11000/oozie -start 14-20090525161321-oozie-joe\n\n# 暂停任务（RUN -> SUSPEND）\noozie job -oozie http://hh:11000/oozie -suspend 14-20090525161321-oozie-joe\n\n# 恢复任务（SUSPEND -> RUN）\noozie job -oozie http://hh:11000/oozie -resume 14-20090525161321-oozie-joe\n\n# 重新运行工作流（仅限工作流）\noozie job -oozie http://hh:11000/oozie -config job.properties -rerun 14-20090525161321-oozie-joe -D oozie.wf.rerun.failnodes=false\n\n# 重新运行定时任务（action表示如下图 future-1）\noozie job -oozie http://hh:11000/oozie -config job.properties -rerun 14-20090525161321-oozie-joe -refresh -action 1-4\n\n# 提交并启动任务（RUN状态）\noozie job -oozie http://hh:11000/oozie -config job.properties -run\n\n# 杀死指定任务（KILL状态）\noozie job -oozie http://hh:11000/oozie -kill 0000358-190502173832787-oozie-hado-C\n\n\n# 查看工作流信息\noozie job -oozie http://hh:11000/oozie -config job.properties -info 14-20090525161321-oozie-joe\n\n# 查看工作流日志\noozie job -oozie http://hh:11000/oozie -config job.properties -log 14-20090525161321-oozie-joe\n\n# \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br")])]),n("p",[s._v("future-1")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://raw.githubusercontents.com/PI-KA-CHU/Image-OSS/main/images62447540-34c8d600-b798-11e9-908b-71936e6c46c3.png",alt:"image"}})]),s._v(" "),n("p"),s._v(" "),n("h2",{attrs:{id:"三、参考"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、参考"}},[s._v("#")]),s._v(" 三、参考")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://www.cnblogs.com/30go/p/8391328.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考一"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://www.cnblogs.com/cenzhongman/p/7259226.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("定时任务"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://oozie.apache.org/docs/4.0.0/DG_CommandLineTool.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);n.default=t.exports}}]);